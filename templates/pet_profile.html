<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pet Profile Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>

<body>
    <!-- Background shapes -->
    <div class="bg-shape bg-shape-1"></div>
    <div class="bg-shape bg-shape-2"></div>
    <div class="pet-page">
        <header>
            <nav class="navbar">
                <div class="logo">
                    <div class="logo-icon"></div>
                    Elanco
                </div>
                <div class="nav-links">
                    <a href="{{ url_for('default') }}">Home</a>
                    <a href="#about">About</a>
                    <a href="#services">Services</a>
                    <a href="{{ url_for('index') }}">Analysis</a>
                    <a href="#contact">Contact</a>
                    <a href="{{ url_for('login') }}" class="login-link">Login</a>
                    <a href="{{ url_for('default') }}" class="cta-button">Back to Home</a>
                </div>
            </nav>
        </header>
        

        <main>
            <center>
                <h1>Pet Profile</h1>
            <p>Your Pets</p>
            </center>

            <section class="hero">
                <div class="badge">

                    {% if pets %}
                    <div id="pets-container">
                        <button class="cta-button"
                                onclick="document.getElementById('pet-modal').style.display='block';">
                            Add Another Pet
                        </button>
                        <div class="pets-list">
                            {% for pet in pets %}
                            <div class="pet-card">
                                <img src="{{ pet.image or url_for('static', filename='default-pet-image.jpg') }}" alt="{{ pet.name }}">
                                <h3>{{ pet.name }}</h3>
                                <p>{{ pet.animal_type }} - {{ pet.breed }}</p>
                                <button class="cta-button"
                                        onclick="editPet('{{ pet.id }}', '{{ pet.name }}', '{{ pet.animal_type }}', '{{ pet.breed }}', '{{ pet.age }}', '{{ pet.height }}', '{{ pet.weight }}', '{{ pet.last_vet_visit }}');">
                                    Edit
                                </button>
                                <button class="cta-button delete-button"
                                        onclick="confirmDelete('{{ pet.id }}');">
                                    Delete
                                </button>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    
                    
                    
                    {% else %}
                    <div id="no-pets-message">
                        <p>You don't have any pets added yet.</p>
                        <center><button class="cta-button"
                                onclick="document.getElementById('pet-modal').style.display='block';">
                                Add a Pet
                            </button>
                        </center>
                    </div>
                    {% endif %}
        </main>

        <!-- Modal Form -->
        <div class="upload-container">
            <div id="pet-modal" class="modal" style="display: none">
                <div class="modal-content">
                    <span class="close"
                        onclick="document.getElementById('pet-modal').style.display='none';">&times;</span>
                    <form method="POST" enctype="multipart/form-data">
                        <input type="hidden" id="pet-id" name="pet_id" />

                        <div class="form-group">
                            <label for="pet-name">Pet Name</label>
                            <input type="text" id="pet-name" name="pet_name" required />
                        </div>

                        <div class="form-group">
                            <label for="animal">Animal Type</label>
                            <input type="text" id="animal" name="animal" required />
                        </div>

                        <div class="form-group">
                            <label for="breed">Breed</label>
                            <input type="text" id="breed" name="breed" />
                        </div>

                        <div class="form-group">
                            <label for="age">Age</label>
                            <input type="number" id="age" name="age" min="0" />
                        </div>

                        <div class="form-group">
                            <label for="height">Height (cm)</label>
                            <input type="number" id="height" name="height" min="0" step="0.1" />
                        </div>

                        <div class="form-group">
                            <label for="weight">Weight (kg)</label>
                            <input type="number" id="weight" name="weight" min="0" step="0.1" />
                        </div>

                        <div class="form-group">
                            <label for="last-vet-visit">Last Vet Visit</label>
                            <input type="date" id="last-vet-visit" name="last_vet_visit" />
                        </div>

                        <div class="form-group">
                            <label for="image">Image</label>
                            <input type="file" id="image" name="image" accept="image/*" />
                        </div>

                        <button type="submit" class="cta-button">Save Pet</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    function editPet(id, name, animal, breed, age, height, weight, lastVetVisit) {
        // Display the modal
        document.getElementById('pet-modal').style.display = 'block';

        // Populate form fields with existing pet data
        document.getElementById('pet-id').value = id;
        document.getElementById('pet-name').value = name;
        document.getElementById('animal').value = animal;
        document.getElementById('breed').value = breed;
        document.getElementById('age').value = age || '';
        document.getElementById('height').value = height || '';
        document.getElementById('weight').value = weight || '';
        document.getElementById('last-vet-visit').value = lastVetVisit || '';
        document.getElementById('image').value = pet.image || '';
        document.getElementById('pet-modal').style.display = 'block';


    }

    function confirmDelete(id) {
        // Show confirmation dialog
        if (confirm('Are you sure you want to delete this pet?')) {
            // Redirect to a DELETE route
            window.location.href = `/delete-pet/${id}`;
        }
    }
</script>

</html>